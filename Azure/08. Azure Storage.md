# 08. Azure Storage

웹 사이트, 모바일 앱, 데스크톱 애플리케이션 및 기타 다양한 유형의 사용자 지정 솔루션 등의 클라이언트는 Azure Storage에서 데이터를 읽고 Azure Storage에 데이터를 쓸 수 있다.



### Azure Blob Storage 기본 사항

Azure Blob Storage는 클라우드용 개체 스토리지 솔루션이다. 방대한 양의 데이터 (텍스트 또는 이진 데이터)를 저장할 수 있다. Azure Blob Storage는 비정형이므로 포함될 수 있는 데이터 종류에 대한 제한이 없다. Blob Storage는 수천 개의 동시 업로드 , 대용량 비디오 데이터, 끊임없이 증가하는 로그 파일을 관리할 수 있으며, 어디서나 인터넷을 통해 연결할 수 있다. 

Blob은 일반적인 파일 형식으로 제한되지 않는다. 즉, 하나의 Blob에 과학 기기에서 스트리밍된 몇 기가바이트의 이진데이터, 다른 애플리케이션용 암호화된 메시지 또는 개발 중인 앱에 대한 사용자 지정 형식의 데이터가 포함될 수 있다. 디스크 스토리지와 비교해 Blob Storage의 한 가지 이점은 개발자가 디스크를 살피거나 관리할 필요가 없다는 점이다. 데이터는 Blob으로 업로드되고 Azure에서 실제 스토리지 요구사항을 관리하기 때문이다. 

Blob Stroage가 적합한 경우에는 다음과 같다. 

- 브라우저에 이미지 또는 문서 직접 제공
- 분산 액세스용 파일 저장.
- 비디오 및 오디오 스트리밍
- 백업/복원, 재해 복구 및 보관용 데이터 저장
- 온-프레미스 또는 Azure 호스팅 서비스에서 분석하기 위한 데이터 저장.
- 가상 머신에 대해 최대 8TB의 데이터를 저장한다.

![스토리지 계정의 계층 구조 다이어그램](https://docs.microsoft.com/ko-kr/learn/azure-fundamentals/azure-storage-fundamentals/media/account-container-blob.png)



### Azure Files 기본 사항

Azure Files는 클라우드에서 산업 표준 SMB(서버 메시지 블록) 및 네트워크 파일 시스템(미리 보기) 프로토콜을 통해 액세스할 수 있는 완전 관리형 파일 공유를 제공한다. Azure Files 공유는 Windows, Linux 및 macOS의 클라우드 또는 온-프레미스 배포를 통해 동시에 탑재될 수 있다. Azure 가상 멈신이나 클라우드 서비스에서 실행되는 애플리케이션은 데스크톱 애플리케이션이 일반적인 SMB 공유를 탑재하는 것처럼 File Storage 공유를 탑재하여 파일 데이터에 액세스할 수 있습니다. 제한 없는 수의 Azure 가상 머신 또는 역할이 파일 스토리지 공유를 동시에 탑재하고 액세스할 수 있다. 일반적인 사용 시나리오로는 전 세계 어디서나 파일을 공유하고, 진단 데이터 또는 애플리케이션 데이터를 공유하는 경우가 있다.

다음과 같은 경우에 사용한다.

- 여러 온-프레미스 애플리케이션에서 파일 공유를 사용합니다. Azure Files를 사용하면 데이터를 공유하는 애플리케이션을 Azure로 쉽게 마이그레이션할 수 있습니다. 온-프레미스 애플리케이션에서 사용하는 것과 동일한 드라이브 문자에 Azure 파일 공유를 탑재하는 경우에는 파일 공유에 액세스하는 애플리케이션 부분이 최소한의 변경으로 작동해야 합니다.
- 구성 파일을 파일 공유에 저장하고 여러 VM에서 액세스합니다. 그룹의 여러 개발자가 사용하는 도구 및 유틸리티를 파일 공유에 저장할 수 있으며, 이렇게 하면 모든 사람이 찾아서 동일한 버전을 사용할 수 있습니다.
- 데이터를 파일 공유에 쓰고 이 데이터를 나중에 처리하거나 분석합니다. 예를 들어 진단 로그, 메트릭 및 크래시 덤프에 이런 작업을 수행할 수 있습니다.



### Blob 액세스 계층 이해

클라우드에 저장된 데이터가 기하급수적으로 증가할 수 있다. 높아지는 스토리지 수요에 대한 비용을 관리하기 위해, 액세스 빈도 및 계획된 보존 기간과 같은 특성을 기반으로 데이터를 구성하는 것이 좋다. 클라우드에 저장된 데이터는 전체 수명에 걸쳐 생성, 처리 및 액세스하는 방법에 따라 다를 수 있다. 일부 데이터는 수명 기간 전반에 걸쳐 활발하게 액세스되고 수정된다. 일부 데이터는 수명 기간 초반에는 빈번하게 액세스되지만 데이터가 오래될수록 액세스 빈도가 급격하게 떨어진다. 일부 데이터는 클라우드에서 유휴 상태로 유지되고 저장된 후 극히 드물게 액세스되기도 합니다. 이와 같이 다양한 액세스 요구 사항을 수용하기 위해 Azure에서는 액세스 요구 사항에 따라 스토리지 비용의 균형을 맞추는 데 사용할 수 있는 몇 가지 액세스 계층을 제공한다.

- 핫 액세스 계층 : 자주 액세스하는 데이터(ex. 웹 사이트의 이미지)를 저장하는 데 최적화
- 쿨 액세스 계층 : 자주 액세스하지 않고 30일 이상 저장하는 데이터(ex. 고객에 대한 송장)에 최적화
- 보관 액세스 계층 : 거의 액세스하지 않고 180일 이상 보관하며 유연한 대기 시간 요구사항이 있는 데이터(ex. 장기 백업)에 적합